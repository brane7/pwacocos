System.register("chunks:///_virtual/main",["./PWAInstaller.ts","./ServiceWorker.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PWAInstaller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServiceWorker.ts"],(function(t){var e,n,s,i,r,o,l,a,u,c,d,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){l=t.cclegacy,a=t._decorator,u=t.Button,c=t.Label,d=t.screen,h=t.sys,p=t.Component},function(t){f=t.ServiceWorker}],execute:function(){var I,m,b,g,P,w,v,y,L,B,W;l._RF.push({},"72048sXgK5KG4XP/f3z1DCG","PWAInstaller",void 0);var A=a.ccclass,C=a.property;t("PWAInstaller",(I=A("PWAInstaller"),m=C(u),b=C(f),g=C(c),P=C(c),I((y=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,s(e,"installButton",y,i(e)),s(e,"serviceWorker",L,i(e)),s(e,"versionLabel",B,i(e)),s(e,"statusLabel",W,i(e)),e.deferredPrompt=null,e.isInstalled=!1,e}n(e,t);var l=e.prototype;return l.start=function(){var t=this;this.deferredPrompt=window.deferredPrompt,this.isInstalled=window.isInstalled,this.checkPWAInstallation(),this.setupEventListeners(),this.updateUI(),this.versionLabel.string="v0.0.10",d.on("window-resize",(function(){setTimeout((function(){console.log("window-resize"),t.checkPWAInstallation(),t.updateUI()}),100)}),this)},l.checkPWAInstallation=function(){h.isBrowser&&(window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0),console.log("isInstalled",this.isInstalled),console.log("ë¸Œë¼ìš°ì € í™˜ê²½:",h.isBrowser),console.log("display-mode standalone:",window.matchMedia("(display-mode: standalone)").matches))},l.setupEventListeners=function(){var t=this;this.installButton&&this.installButton.node.on(u.EventType.CLICK,this.onInstallButtonClick,this),h.isBrowser&&(window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),t.deferredPrompt=e,t.updateUI()})),window.addEventListener("appinstalled",(function(){t.isInstalled=!0,t.updateUI(),console.log("PWAê°€ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!")})))},l.onInstallButtonClick=function(){this.deferredPrompt?this.showInstallPrompt():this.isInstalled?this.showAlreadyInstalledMessage():this.showInstallInstructions()},l.showInstallPrompt=function(){var t=r(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.deferredPrompt){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,this.deferredPrompt.prompt(),t.next=6,this.deferredPrompt.userChoice;case 6:e=t.sent,n=e.outcome,console.log("outcome",n,this.deferredPrompt),"accepted"===n?(console.log("ì‚¬ìš©ìžê°€ PWA ì„¤ì¹˜ë¥¼ ìˆ˜ë½í–ˆìŠµë‹ˆë‹¤"),this.statusLabel.string="ì„¤ì¹˜ ì¤‘...",this.deferredPrompt=null):(console.log("ì‚¬ìš©ìžê°€ PWA ì„¤ì¹˜ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤"),this.statusLabel.string="ì„¤ì¹˜ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"),this.updateUI(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error("PWA ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",t.t0),this.statusLabel.string="ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤";case 17:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),l.showAlreadyInstalledMessage=function(){var t=this;this.statusLabel.string="PWAê°€ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìžˆìŠµë‹ˆë‹¤!",setTimeout((function(){t.updateUI()}),2e3)},l.showInstallInstructions=function(){var t=this;this.statusLabel.string="ë¸Œë¼ìš°ì €ì—ì„œ ì„¤ì¹˜ ì˜µì…˜ì„ ì°¾ì•„ì£¼ì„¸ìš”",setTimeout((function(){t.updateUI()}),3e3)},l.updateUI=function(){this.installButton&&this.statusLabel&&(this.isInstalled?(this.installButton.interactable=!1,this.installButton.node.getComponentInChildren(c).string="ì´ë¯¸ ì„¤ì¹˜ë¨",this.statusLabel.string="PWAê°€ ì„¤ì¹˜ë˜ì–´ ìžˆìŠµë‹ˆë‹¤"):this.deferredPrompt?(this.installButton.interactable=!0,this.installButton.node.getComponentInChildren(c).string="PWA ì„¤ì¹˜",this.statusLabel.string="ì„¤ì¹˜í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤"):(this.installButton.interactable=!1,this.installButton.node.getComponentInChildren(c).string="ì„¤ì¹˜ ë¶ˆê°€",this.statusLabel.string="ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ìžˆê±°ë‚˜ ì„¤ì¹˜ í• ìˆ˜ ì—†ìŠµë‹ˆë‹¤"))},l.isPWAInstallable=function(){return null!==this.deferredPrompt&&!this.isInstalled},l.refreshInstallationStatus=function(){this.checkPWAInstallation(),this.updateUI()},l.onDestroy=function(){this.installButton&&this.installButton.node.off(u.EventType.CLICK,this.onInstallButtonClick,this)},e}(p)).prototype,"installButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"serviceWorker",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(v.prototype,"versionLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(v.prototype,"statusLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=v))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceWorker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,s,u,c,a,h,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,a=t.Button,h=t.Label,l=t.Component}],execute:function(){var p,f,b,g,v,d,k;u._RF.push({},"95ee2quKp5OuoJ6boIZGaGc","ServiceWorker",void 0);var w=c.ccclass,B=c.property;t("ServiceWorker",(p=w("ServiceWorker"),f=B(a),b=B(a),p((d=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"subscribeButton",d,o(e)),i(e,"testPushButton",k,o(e)),e.registration=null,e}n(e,t);var u=e.prototype;return u.start=function(){this.registerServiceWorker(),this.setupEventListeners()},u.registerServiceWorker=function(){var t=this;if("serviceWorker"in navigator){navigator.serviceWorker.register("/pwacocos/sw.js").then((function(e){console.log("âœ… SW ë“±ë¡ ì„±ê³µ:",e),t.registration=e,t.checkPushNotificationSupport()})).catch((function(t){console.log("âŒ SW ë“±ë¡ ì‹¤íŒ¨:",t),console.log("ServiceWorker ì—†ì´ë„ PWA ì„¤ì¹˜ ê¸°ëŠ¥ì€ ìž‘ë™í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤")}))}else console.log("âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” Service Workerë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")},u.checkPushNotificationSupport=function(){"PushManager"in window?(console.log("âœ… í‘¸ì‹œ ì•Œë¦¼ ì§€ì›ë¨"),this.checkPushSubscription()):console.log("âŒ í‘¸ì‹œ ì•Œë¦¼ ì§€ì›ë˜ì§€ ì•ŠìŒ")},u.checkPushSubscription=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registration){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.registration.pushManager.getSubscription();case 5:(e=t.sent)?(console.log("âœ… ì´ë¯¸ í‘¸ì‹œ êµ¬ë…ë¨:",e),this.updateSubscribeButton(!0)):(console.log("â³ í‘¸ì‹œ êµ¬ë… í•„ìš”"),this.updateSubscribeButton(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("âŒ í‘¸ì‹œ êµ¬ë… ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),u.subscribeToPushNotifications=function(){var t=r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ðŸ”” í…ŒìŠ¤íŠ¸ í‘¸ì‹œ ì•Œë¦¼ êµ¬ë…"),this.updateSubscribeButton(!0),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.unsubscribeFromPushNotifications=function(){var t=r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ðŸ”” í…ŒìŠ¤íŠ¸ í‘¸ì‹œ ì•Œë¦¼ êµ¬ë… í•´ì œ"),this.updateSubscribeButton(!1),t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.updateSubscribeButton=function(t){if(this.subscribeButton){var e=this.subscribeButton.node.getComponentInChildren(h);e&&(e.string=t?"í‘¸ì‹œ í•´ì œ":"í…ŒìŠ¤íŠ¸ í‘¸ì‹œ"),this.subscribeButton.interactable=!0}},u.setupEventListeners=function(){this.subscribeButton&&this.subscribeButton.node.on(a.EventType.CLICK,this.onSubscribeButtonClick,this),this.testPushButton&&this.testPushButton.node.on(a.EventType.CLICK,this.onTestPushButtonClick,this)},u.onSubscribeButtonClick=function(){var t=this;this.registration?this.registration.pushManager.getSubscription().then((function(e){e?t.unsubscribeFromPushNotifications():t.subscribeToPushNotifications()})):this.showTestPushNotification()},u.onTestPushButtonClick=function(){console.log("ðŸ§ª í…ŒìŠ¤íŠ¸ í‘¸ì‹œ ë²„íŠ¼ í´ë¦­ë¨"),this.showTestPushNotification(),this.showTestButtonFeedback()},u.showTestButtonFeedback=function(){if(this.testPushButton){var t,e=(null==(t=this.testPushButton.node.getComponentInChildren(h))?void 0:t.string)||"í…ŒìŠ¤íŠ¸ í‘¸ì‹œ",n=this.testPushButton.node.getComponentInChildren(h);n&&(n.string="ì „ì†¡ë¨!",setTimeout((function(){n.string=e}),2e3))}},u.showTestPushNotification=function(){var t=this;"Notification"in window?"granted"===Notification.permission?this.createTestNotification():"denied"!==Notification.permission?Notification.requestPermission().then((function(e){"granted"===e?t.createTestNotification():console.log("âŒ ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë¨")})):console.log("âŒ ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë¨"):console.log("âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")},u.createTestNotification=function(){console.log("ðŸ”” í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ìƒì„±");var t=new Notification("ðŸš€ PWA í…ŒìŠ¤íŠ¸ ì•Œë¦¼!",{body:"ì„œë²„ ì—°ë™ ì—†ì´ ë¡œì»¬ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì´ ìž‘ë™í•©ë‹ˆë‹¤!",icon:"/pwacocos/icon.png",badge:"/pwacocos/icon.png",tag:"test-notification",requireInteraction:!1,silent:!1,data:{type:"test",timestamp:Date.now()}});t.onclick=function(e){console.log("ðŸ”” í…ŒìŠ¤íŠ¸ ì•Œë¦¼ í´ë¦­ë¨:",e),t.close(),window.focus&&window.focus()},setTimeout((function(){t.close()}),5e3),console.log("âœ… í…ŒìŠ¤íŠ¸ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ë¨")},u.showMultipleTestNotifications=function(t){var e=this;void 0===t&&(t=3);for(var n=0;n<t;n++)setTimeout((function(){e.createTestNotification()}),1e3*n)},u.getSubscriptionStatus=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registration){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,this.registration.pushManager.getSubscription();case 5:return e=t.sent,t.abrupt("return",null!==e);case 9:return t.prev=9,t.t0=t.catch(2),console.log("êµ¬ë… ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:",t.t0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),u.isServiceWorkerRegistered=function(){return null!==this.registration},u.isPushNotificationSupported=function(){return"PushManager"in window&&"serviceWorker"in navigator},u.reRegisterServiceWorker=function(){var t=r(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registration){t.next=3;break}return t.next=3,this.registration.unregister();case 3:this.registerServiceWorker();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.onDestroy=function(){this.subscribeButton&&this.subscribeButton.node.off(a.EventType.CLICK,this.onSubscribeButtonClick,this),this.testPushButton&&this.testPushButton.node.off(a.EventType.CLICK,this.onTestPushButtonClick,this)},e}(l)).prototype,"subscribeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"testPushButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));u._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});