System.register("chunks:///_virtual/main",["./PWAInstaller.ts"],(function(){return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/PWAInstaller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,s,o,l,i,a,r,c,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,c=t.Button,u=t.Label,h=t.sys,d=t.Component}],execute:function(){var p,g,f,m,I,P,b,v,L;a._RF.push({},"72048sXgK5KG4XP/f3z1DCG","PWAInstaller",void 0);var A=r.ccclass,y=r.property;t("PWAInstaller",(p=A("PWAInstaller"),g=y(c),f=y(u),m=y(u),p((b=e((P=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l))||this,s(e,"installButton",b,o(e)),s(e,"versionLabel",v,o(e)),s(e,"statusLabel",L,o(e)),e.deferredPrompt=null,e.isInstalled=!1,e}n(e,t);var a=e.prototype;return a.start=function(){this.checkPWAInstallation(),this.setupEventListeners(),this.updateUI(),this.versionLabel.string="v4.0.0",this.checkImmediateInstallPrompt()},a.checkPWAInstallation=function(){h.isBrowser&&(window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0),console.log("isInstalled",this.isInstalled),console.log("ë¸Œë¼ìš°ì € í™˜ê²½:",h.isBrowser),console.log("display-mode standalone:",window.matchMedia("(display-mode: standalone)").matches),this.validatePWARequirements())},a.validatePWARequirements=function(){var t=this;console.log("ğŸ” PWA ìš”êµ¬ì‚¬í•­ ê²€ì¦ ì‹œì‘...");var e=document.querySelector('link[rel="manifest"]');e?(console.log("âœ… ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë§í¬ ë°œê²¬:",e.href),this.statusLabel.string="PWA ìš”êµ¬ì‚¬í•­ ê²€ì¦ ì¤‘...",fetch(e.href).then((function(t){if(console.log("ğŸ“‹ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì‘ë‹µ ìƒíƒœ:",t.status),t.ok)return t.json();throw new Error("ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë¡œë“œ ì‹¤íŒ¨: "+t.status)})).then((function(e){console.log("ğŸ“‹ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë‚´ìš©:",e),console.log("ğŸ–¼ï¸ ì•„ì´ì½˜ ì •ë³´:",e.icons);var n=["name","short_name","start_url","display"].filter((function(t){return!e[t]}));if(n.length>0)return console.log("âŒ ëˆ„ë½ëœ í•„ìˆ˜ í•„ë“œ:",n),void(t.statusLabel.string="ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ëˆ„ë½: "+n.join(", "));if(e.icons&&e.icons.length>0){var s=e.icons[0].src;console.log("ğŸ–¼ï¸ ì•„ì´ì½˜ ê²½ë¡œ:",s),fetch(s,{method:"HEAD"}).then((function(e){console.log("ğŸ–¼ï¸ ì•„ì´ì½˜ íŒŒì¼ ìƒíƒœ:",e.status),e.ok?(console.log("âœ… ì•„ì´ì½˜ íŒŒì¼ ì •ìƒ"),t.statusLabel.string="PWA ìš”êµ¬ì‚¬í•­ ê²€ì¦ ì™„ë£Œ",t.checkInstallability()):(console.log("âŒ ì•„ì´ì½˜ íŒŒì¼ ë¬¸ì œ:",e.status),t.statusLabel.string="ì•„ì´ì½˜ íŒŒì¼ ì˜¤ë¥˜: "+e.status)})).catch((function(e){console.log("âŒ ì•„ì´ì½˜ íŒŒì¼ í™•ì¸ ì‹¤íŒ¨:",e),t.statusLabel.string="ì•„ì´ì½˜ íŒŒì¼ í™•ì¸ ì‹¤íŒ¨"}))}else console.log("âŒ ì•„ì´ì½˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤"),t.statusLabel.string="ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ì•„ì´ì½˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤"})).catch((function(e){console.log("âŒ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì‹± ì‹¤íŒ¨:",e),t.statusLabel.string="ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì‹± ì‹¤íŒ¨"}))):(console.log("âŒ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë§í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),this.statusLabel.string="ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")},a.checkInstallability=function(){this.deferredPrompt?(console.log("ğŸ¯ PWA ì„¤ì¹˜ ì¤€ë¹„ ì™„ë£Œ!"),this.statusLabel.string="ì„¤ì¹˜í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤"):(console.log("â³ PWA ì„¤ì¹˜ ì´ë²¤íŠ¸ ëŒ€ê¸° ì¤‘..."),this.statusLabel.string="PWA ì„¤ì¹˜ ì´ë²¤íŠ¸ ëŒ€ê¸° ì¤‘...")},a.checkImmediateInstallPrompt=function(){var t=this;h.isBrowser&&(console.log("ğŸ” ì¦‰ì‹œ ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ í™•ì¸ ì¤‘..."),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then((function(e){console.log("ğŸ“± ì„¤ì¹˜ëœ ê´€ë ¨ ì•±:",e),e.length>0&&(t.isInstalled=!0,console.log("âœ… PWAê°€ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìŒ"),t.updateUI())})).catch((function(t){console.log("ğŸ“± ì„¤ì¹˜ëœ ì•± í™•ì¸ ì‹¤íŒ¨:",t)})),window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0,console.log("âœ… PWAê°€ standalone ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘"),this.updateUI()))},a.setupEventListeners=function(){var t=this;this.installButton&&this.installButton.node.on(c.EventType.CLICK,this.onInstallButtonClick,this),h.isBrowser&&(console.log("ğŸ”§ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì¤‘..."),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){t.checkDelayedInstallPrompt()})):this.checkDelayedInstallPrompt(),window.addEventListener("beforeinstallprompt",(function(e){console.log("ğŸ¯ beforeinstallprompt ì´ë²¤íŠ¸ ë°œìƒ!"),e.preventDefault(),t.deferredPrompt=e,t.updateUI()})),window.addEventListener("appinstalled",(function(){console.log("ğŸ‰ appinstalled ì´ë²¤íŠ¸ ë°œìƒ!"),t.isInstalled=!0,t.updateUI(),console.log("PWAê°€ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!")})))},a.checkDelayedInstallPrompt=function(){var t=this;console.log("ğŸ” ì§€ì—°ëœ ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ í™•ì¸ ì¤‘..."),setTimeout((function(){t.deferredPrompt||t.isInstalled||(console.log("â³ PWA ì„¤ì¹˜ ì´ë²¤íŠ¸ ëŒ€ê¸° ì¤‘... (ì§€ì—° í™•ì¸)"),t.statusLabel.string="PWA ì„¤ì¹˜ ì´ë²¤íŠ¸ ëŒ€ê¸° ì¤‘...")}),1e3)},a.onInstallButtonClick=function(){this.deferredPrompt?this.showInstallPrompt():this.isInstalled?this.showAlreadyInstalledMessage():this.showInstallInstructions()},a.showInstallPrompt=function(){var t=l(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.deferredPrompt){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,this.deferredPrompt.prompt(),t.next=6,this.deferredPrompt.userChoice;case 6:e=t.sent,"accepted"===e.outcome?(console.log("ì‚¬ìš©ìê°€ PWA ì„¤ì¹˜ë¥¼ ìˆ˜ë½í–ˆìŠµë‹ˆë‹¤"),this.statusLabel.string="ì„¤ì¹˜ ì¤‘...",this.installButton.node.active=!1):(console.log("ì‚¬ìš©ìê°€ PWA ì„¤ì¹˜ë¥¼ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤"),this.statusLabel.string="ì„¤ì¹˜ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"),this.deferredPrompt=null,this.updateUI(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error("PWA ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",t.t0),this.statusLabel.string="ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤";case 17:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),a.showAlreadyInstalledMessage=function(){var t=this;this.statusLabel.string="PWAê°€ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤!",setTimeout((function(){t.updateUI()}),2e3)},a.showInstallInstructions=function(){var t=this;this.statusLabel.string="ë¸Œë¼ìš°ì €ì—ì„œ ì„¤ì¹˜ ì˜µì…˜ì„ ì°¾ì•„ì£¼ì„¸ìš”",setTimeout((function(){t.updateUI()}),3e3)},a.updateUI=function(){this.installButton&&this.statusLabel&&(console.log("isInstalled",this.isInstalled),console.log("deferredPrompt",this.deferredPrompt),this.isInstalled?(this.installButton.interactable=!1,this.installButton.node.active=!1,this.installButton.node.getComponentInChildren(u).string="ì´ë¯¸ ì„¤ì¹˜ë¨",this.statusLabel.string="PWAê°€ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤"):this.deferredPrompt?(this.installButton.interactable=!0,this.installButton.node.active=!0,this.installButton.node.getComponentInChildren(u).string="PWA ì„¤ì¹˜",this.statusLabel.string="ì„¤ì¹˜í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤"):(this.installButton.interactable=!1,this.installButton.node.active=!1,this.installButton.node.getComponentInChildren(u).string="ì„¤ì¹˜ ë¶ˆê°€",this.statusLabel.string="ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” PWA ì„¤ì¹˜ê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤"))},a.isPWAInstallable=function(){return null!==this.deferredPrompt&&!this.isInstalled},a.refreshInstallationStatus=function(){this.checkPWAInstallation(),this.updateUI()},a.onDestroy=function(){this.installButton&&this.installButton.node.off(c.EventType.CLICK,this.onInstallButtonClick,this)},e}(d)).prototype,"installButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(P.prototype,"versionLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"statusLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=P))||I));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});